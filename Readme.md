## 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ express –∏ typescript
### Done:
1. npm init
2. npm i --save-dev typescript, ts-node, @types/express
3. npm i express nodemon
4. tsc --init
5. tc config es5 -> es6
6. package.json add script nodemon src/App.ts
7. npm run dev
8. share project on github
9. gitignore add .idea
10. commit and push
### Testing:
open browser on localhost:3000


## 2. –ü–æ–¥–∫–ª—é—á–∞–µ–º MongoDB
### Done:
1. –°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ (src->config->default.ts). –ö–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ 3000 –ø–æ—Ä—Ç—É, —Å–µ—Ä–≤–µ—Ä –Ω–∞ 5000.
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª–æ–∫–∞–ª—å–Ω–æ MongoDB https://www.mongodb.com/try/download/community (MongoDBCompass –∏–¥—ë—Ç –≤ –∫–æ–º–ø–ª–µ–∫—Ç–µ) (–≤–µ—Ä—Å–∏—è –∞–≤—Ç–æ—Ä–∞ 5.0.3)
3. –û—Ç–∫—Ä—ã–≤–∞–µ–º MongoDBCompass, –≤—ã–ø–æ–ª–Ω—è–µ–º connect localhost:27017
4. –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö messenger-express, collection users
5. –î–æ–±–∞–≤–ª—è–µ–º –∞–¥—Ä–µ—Å –ë–î –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
6. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º mongoose (—Ç–∏–ø—ã –∏–¥—É—Ç –≤ –∫–æ–º–ø–ª–µ–∫—Ç–µ, –Ω–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å @types/mongoose)
7. –ü–∏—à–µ–º –∫–æ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î, src->db->connect.ts
8. –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –ë–î, –∏ –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞ –∑–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
9. commit and push
### Testing:
open browser on localhost:5000

## 3. –°–æ–∑–¥–∞—ë–º –º–∞—Ä—à—Ä—É—Ç—ã –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
1. –°–æ–∑–¥–∞—ë–º —Å—Ö–µ–º—É user –¥–ª—è MongoDB (src->models->userModel.ts)
2. –ò—Å–ø–æ–ª—å–∑—É—è —Å—Ö–µ–º—É —Å–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç –º–æ–¥–µ–ª–∏ mongoose
3. –î–∞–ª—å—à–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥—Ç–∞—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä user, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å), –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤–µ—Ä–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä –ª–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω—å—à–µ 3 —Å–∏–º–≤–æ–ª–æ–≤, –ª–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –±–¥ –∏ —Ç.–¥.), —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—ë—Ç –µ–º—É –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–¥, –∏–Ω–∞—á–µ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
4. –¢–∞–∫–∂–µ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–≥—É—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏, —á—Ç–æ–±—ã –æ—Ç–ª–∏—á–∏—Ç—å –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –æ—Ç –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–¥–∏–º –∫–ª–∞—Å—Å –æ—à–∏–±–∫–∏
5. –ö–ª–∞—Å—Å –æ—à–∏–±–∫–∏ ApiError —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ BedRequest, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞ ApiError (–¥–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å —Å–ª–µ–¥—É–µ—Ç –≤—ã–∑—ã–≤–≤–∞—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏) (src->exceptions->ApiError.ts)
6. –°–æ–∑–¥–∞–¥–∏–º middleware –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ (–≤ —Ç–æ–º —á–∏—Å–ª–µ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö) (src->middlewares->errorMiddleware.ts)
7. –ü–æ–¥–∫–ª—é—á–∏–º middleware
8. –°–æ–∑–¥–∞–¥–∏–º DAO –¥–ª—è user (–æ–Ω –Ω—É–∂–µ–Ω —á—Ç–æ–±—ã –æ—Ç–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–æ–≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –æ—Ç –≤–∏–¥–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Å –ø–æ–º–æ—â—å—é DAO –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ PostgreSQL, –Ω–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ—Ç–æ–¥–æ–≤ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ—Ç –∂–µ)) (src->dao->userDAO.ts)
9. –°–æ–∑–¥–∞–¥–∏–º service –¥–ª—è user (—Å–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) (src->service->userService.ts)
10. –°–æ–∑–¥–∞–¥–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä user (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö, –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã, –≤–æ–∑–≤—Ä–∞—à–∞–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é) (src->controllers->userController.ts)
11. –î–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É—Å—Ç–∞–Ω–æ–≤–∏–º bcrypt (npm i bcrypt, npm i --save-dev @types/bcrypt)
12. –î–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç–∞–Ω–æ–≤–∏–º express-validation (npm i express-validator); –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ middleware, –Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–µ
13. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–∞–∫–∂–µ –ø–æ–¥–∫–ª—é—á–∏–º middleware express.json (—ç—Ç–æ—Ç –ø–ª–∞–≥–∏–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø–æ–ª—è –∏–∑ –æ–±—ä–µ–∫—Ç–∞ req.body, –±–µ–∑ –¥–∞–Ω–Ω–æ–≥–æ middleware —É req –Ω–µ –±—É–¥–µ—Ç –æ–±—ä–µ–∫—Ç–∞ body)
14. commit and push
### Testing:
1. Postman /auth/login (raw->json)
   –ü–æ–ª—É—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π –≤–∞–ª–º–¥–∞—Ü–∏–∏, —Ç–∞–∫-–∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∞–∫–∏–º email –Ω–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. Browser fetch auth/login (CORS error). –û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã learn.javascript.ru. –ú–æ–∂–Ω–æ –∏ —Å–¥—Ä—É–≥–æ–π, –Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–∏ —Å–∞–π—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –¥—Ä—É–≥–∏–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º. (https://stackoverflow.com/a/53690821) –ù–∞–ø—Ä–∏–º–µ—Ä yandex.ru –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç.
   –ö–æ–¥ –∑–∞–ø—Ä–æ—Å–∞:
```javascript
fetch('http://localhost:5000/auth/login', {
  method: 'POST',
  headers: {
    'Accept': 'application/json, text/plain, */*',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({email: "mail@mail.ru", password: '12345'})
}).then(res => res.json())
  .then(res => console.log(res)).catch(err=>console.log(err));
```
–ü–æ–ª—É—á–∞–µ–º TypeError: Failed to fetch
at <anonymous>:1:1 (–∏–∑-–∑–∞ CORS)
3. Postman auth/registration
4. Browser auth/registration (CORS error)

## 4. router, CORS
1. –£—Å—Ç–∞–Ω–æ–≤–∏–º CORS –∏ –ø–æ–¥–∫–ª—é—á–∏–º –µ–≥–æ (npm i cors; npm i @types/cors --save-dev)
2. –í —Å–≤–æ–π—Å—Ç–≤–æ origin –∑–∞–ø–∏—à–µ–º: '*' (–ª—é–±—ã–µ –∞–¥—Ä–µ—Å–∞) –∏ –≤—ã–ø–æ–ª–Ω–∏–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π fetch-–∑–∞–ø—Ä–æ—Å. –ü–æ–ª—É—á–∏–º: {message: '–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏', errors: Array(1)}
3. –ò–∑–º–µ–Ω–∏–º —Å–≤–æ–π—Å—Ç–≤–æ origin –Ω–∞: 'https://learn.javascript.ru' (–±–µ–∑ / –≤ –∫–æ–Ω—Ü–µ) –∏ –≤—ã–ø–æ–ª–Ω–∏–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π fetch-–∑–∞–ø—Ä–æ—Å. –ü–æ–ª—É—á–∏–º: {message: '–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏', errors: Array(1)}
4. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ CORS –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤ —Ñ–∞–π–ª–µ CORS.md
5. –í—ã–ø–æ–ª–Ω–∏–º –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é –∫–æ–¥–∞ –ø–µ—Ä–µ–Ω–µ—Å—ë–º –º–∞—Ä—à—Ä—É—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª, —Å–æ–∑–¥–∞–¥–∏–º router.
6. –î–æ–±–∞–≤–∏–º –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤: "api"
7. –ò–∑–º–µ–Ω–∏–º url –Ω–∞ http://localhost:5000/api/auth/login –∏ –≤—ã–ø–æ–ª–Ω–∏–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π fetch-–∑–∞–ø—Ä–æ—Å. –ü–æ–ª—É—á–∏–º: {message: '–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏', errors: Array(1)}
8. –ò–∑–º–µ–Ω–∏–º —Å–≤–æ–π—Å—Ç–≤–æ origin –Ω–∞: config.app.client_url
9. commit and push

## 5. –¢–µ—Å—Ç–∏—Ä—É–µ–º –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é Jest
1. –£—Å—Ç–∞–Ω–æ–≤–∏–º Jest (npm install --save-dev jest)
2. –¢–∞–∫ –∫–∞–∫ –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TS —É—Ç—Å–Ω–∞–æ–≤–∏–º –º–æ–¥—É–ª–∏ @types/jest –∏ ts-jest
3. –°–æ–∑–¥–∞–¥–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è jest (jest.config.js)
4. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è MongoDB –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –ø–∞–∫–µ—Ç (mongodb-memory-server) —É—Å—Ç–∞–Ω–æ–≤–∏–º –µ–≥–æ –∫–∞–∫ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å. –î–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç, –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–æ–∑–¥–∞—ë—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è –Ω–∏–∫–∞–∫ –Ω–µ —Å–≤—è–∑–∞–Ω–∞ —Å –Ω–∞—à–µ–π –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î.
5. –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –Ω–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é, —Ç–∞–∫–∂–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏–º –ø–∞–∫–µ—Ç supertest (dev) –∏ —Ç–∏–ø—ã –∫ –Ω–µ–º—É.
6. –î–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é disconnect –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö MongoDB (db->connect.ts). –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∫–∞–∂–¥–æ–º—É —Ç–µ—Å—Ç–æ–≤–æ–º—É —Ñ–∞–π–ª—É, —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –ø—É—Å—Ç–æ–π –ë–î. –ï—Å–ª–∏ –≤ –ø–µ—Ä–≤—ã–º —Ñ–∞–π–ª–µ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –ë–î, —Ç–æ –≤–æ –≤—Ç–æ—Ä–æ–º —Ñ–∞–π–ª–µ –ë–î –≤—Å—ë-—Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –ø—É—Å—Ç–æ–π.
7. –ò–∑–º–µ–Ω–∏–º —Ñ–∞–π–ª App.ts —Ç–µ–ø–µ—Ä—å –º–µ—Ç–æ–¥ listen –Ω–µ –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏. –≠—Ç–æ –≤–∞–∂–Ω–æ —Ç–∞–∫ –∫–∞–∫ –µ—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –æ—à–∏–±–∫—É, —á—Ç–æ –ø–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç. (https://github.com/visionmedia/supertest/issues/568#issuecomment-575994602)
8. –ó–∞–ø–∏—à–µ–º —Å–∫—Ä–∏–ø—Ç test –≤ package.json. –ß—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ –∫–∞–∫–æ–º —Ä–µ–∂–∏–º–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ–±—ã—á–Ω–æ–º –∏–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) –º—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å—Ä–µ–¥—ã (NODE_ENV=test jest). –ï—Å–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –µ—Ç—Å–∏—Ä–æ–≤–∞–Ω–∏—è (npm run test) –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É: "NODE_ENV" –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –∏–ª–∏ –≤–Ω–µ—à–Ω–µ–π –∫–æ–º–∞–Ω–¥–æ–π, –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π –∏–ª–∏ –ø–∞–∫–µ—Ç–Ω—ã–º —Ñ–∞–π–ª–æ–º., —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç (npm install -g win-node-env) –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.  
9. –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±—É–¥—É—Ç —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ –ø–∞–ø–∫–µ __test__
10. –í —Ñ–∞–π–ª–µ jest.setup.ts –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –û–Ω–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–µ –µ–¥–∏–Ω—ã–∂–¥—ã,–∞ –¥–ª—è –ö–ê–ñ–î–û–ì–û —Ñ–∞–π–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –º—ã –ø–æ–¥–∫–ª—é—á–∞–µ–º –∏ –æ—Ç–∫–ª—é—á–∞–µ–º –ë–î).
11. commit and push
### Testing
1. npm run dev (–ø—Ä–æ–≤–µ—Ä–∏–º —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ø—Ä–µ–∂–Ω–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç)
2. –ù–∞–ø–∏—à–µ–º –ø–µ—Ä–≤—ã–π —Ñ–∞–π–ª –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (api__auth__routes.test.ts)
3. –ó–∞–ø—É—Å—Ç–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (npm run test). –í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—Ä—ã—Ç—å –ø—Ä–æ–π–¥–µ–Ω—ã
4. –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª api__auth__routes.test.ts (–∏–∑–º–µ–Ω–∏–º –∏–º—è –∫–æ–ø–∏–∏ –Ω–∞ api__auth__routes2.test.ts)
5. –ó–∞–ø—É—Å—Ç–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –¥–≤—É–º—è —Ñ–∞–π–ª–∞–º–∏ (npm run test). –í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—Ä—ã—Ç—å –ø—Ä–æ–π–¥–µ–Ω—ã. –≠—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –Ω–µ–∑–∞–≤–∏—Å–∏–º, –∏–Ω–∞—á–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –±—ã –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
6. –ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å MongoDBCompass, –∏ —É–≤–∏–¥–µ—Ç—å —á—Ç–æ –Ω–∞—à–∞ –ë–î –æ—Å—Ç–∞–ª–∞—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ü—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∞—è –ë–î.
7. –£–¥–∞–ª–∏–º –∫–æ–ø–∏—é –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

## 6. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–µ—Å—Å–∏–π –∏ cookie
1. –°—Ö–µ–º—É —Ä–∞–±–æ—Ç—ã —Å–µ—Å—Å–∏–π –∏ –∫—É–∫–∏ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–¥–µ—Å—å: https://www.youtube.com/watch?v=bvQah0k5-eA&list=PL1Nml43UBm6fPP7cW9pAFTdZ_9QX2mBn2
2. –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å redis. –ü–æ-—Å—É—Ç–∏ redis —ç—Ç–æ –∫—ç—à. (npm i redis, —Ç–∏–ø—ã –∏–¥—É—Ç –≤ –∫–æ–º–ø–ª–µ–∫—Ç–µ). –¢–∞–∫–∂–µ –Ω–µ –∑–∞–±—ã–≤–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å redis –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä. –î–ª—è windows –Ω–µ—Ç –æ—Ñ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ (—É –∞–≤—Ç–æ—Ä–∞ redis 3.2.100 —Å–∫–∞—á–∞–Ω–Ω—ã–π –æ—Ç—Å—é–¥–∞: https://github.com/microsoftarchive/redis/releases).
3. –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ redis —á–µ—Ä–µ–∑ –µ–≥–æ client (db->redis.ts). –ü–æ-—É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è localhost:6379.
4. –°–æ–∑–¥–∞–¥–∏–º session-middleware (middleware->sessionMiddleware.ts). –î–∞–Ω–Ω–æ–µ middleware, —Å–≤—è–∑—ã–≤–∞–µ—Ç cookie –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º c –ë–î redis. –í –∫—É–∫–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ—Å—Å–∏–∏, redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç id –∫–∞–∫ –∫–ª—é—á –ë–î, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–¥–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å. –£—Å—Ç–∞–Ω–æ–≤–∏–º –ø–∞–∫–µ—Ç session-express –∏ —Ç–∏–ø—ã –∫ –Ω–µ–º—É (—Ç–∏–ø—ã dev). –£—Å—Ç–∞–Ω–æ–≤–∏–º –ø–∞–∫–µ—Ç connect-redis –∏ —Ç–∏–ø—ã –∫ –Ω–µ–º—É (—Ç–∏–ø—ã dev). connect-redis —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–π –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ redis.
5. –ò–∑–º–µ–Ω–∏–º —Ñ–∞–π–ª App.ts. –ü–æ–¥–∫–ª—é—á–∏–º session-middleware. –î–æ–±–∞–≤–∏–º –≤ CORS credentials: true, —á—Ç–æ–±—ã –±—Ä–∞—É–∑–µ—Ä –ø–µ—Ä–µ–¥–∞–≤–∞–ª –Ω–∞–º cookie, —Å –∑–∞–ø—Ä–æ—Å–æ–º –æ—Ç origin.
6. –¢–µ–ø–µ—Ä—å —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –µ–≥–æ —Å–µ—Å—Å–∏—é. –ï—Å–ª–∏ —Å–µ—Å—Å–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î redis –∏ –≤ —Å–µ—Å—Å–∏–∏ –∑–∞–ø–∏—Å–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∑–Ω–∞—á–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω.
7. –†–µ–∞–ª–∏–∑—É–µ–º middleware, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. (middleware->authMiddleware.ts). –î–æ–±–∞–≤–∏–º —Å–æ–æ—Ç–≤–µ—Å—Ç–≤—É—é—â—É—é –æ—à–∏–±–∫—É –≤ ApiError. –î–∞–Ω–Ω–æ–µ middleware –º—ã –±—É–¥–µ–º –ø–æ–¥–∫–ª—é—á–∞—Ç—å –Ω–µ –≥–ª–æ–±–∞–ª—å–Ω–æ (–≤ App.ts), –∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (protected routes). –í App.ts –æ–±—ä—è–≤–∏–º —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ö—Ä–∞–Ω—è—â–∏—Ö—Å—è –≤ —Å–µ—Å—Å–∏–∏ (UserDto).
8. –†–µ–∞–ª–∏–∑—É–µ–º –¥–≤–∞ –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–∞ logout, user-data. 
9. –ò–∑–º–µ–Ω–∏–º –º–µ—Ç–æ–¥—ã userController. –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–µ, —Å–µ—Å—Å–∏—è –±—É–¥–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è, –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ —É–Ω–∏—á—Ç–æ–∂–∞—Ç—å—Å—è.
10. commit and push
### Testing
1. npm run dev
2. –û—Ç–∫—Ä—ã–≤–∞–µ–º redis-cli
3. –í—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É ping, –ø–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç PONG.
4. –í—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É keys *, –ø–æ–ª—É—á–∞–µ–º: (empty list or set), –ë–î –ø—É—Å—Ç–∞—è (–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é redis –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ 1 –ë–î). –ï—Å–ª–∏ –ë–î –Ω–µ –ø—É—Å—Ç–∞—è, –≤—ã–ø–æ–ª–Ω–∏–º –∫–æ–º–∞–Ω–¥—É flushall (—É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î).
5. –¢–µ–ø–µ—Ä—å –ë–î redis –ø—É—Å—Ç–∞—è. 
6. Postman POST /api/auth/user-data, –ø–æ–ª—É—á–∞–µ–º –æ—à–∏–±–∫—É: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ü–æ–¥ –∫–Ω–æ–ø–∫–æ–π send –Ω–∞–∂–∏–º–∞–µ–º cookies. Cookie c –Ω–∞—à–∏–º –∏–º–µ–Ω–µ–º: sessionId__MD_Express, –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ.
7. Postman POST /api/auth/registration, –≤—ã–ø–æ–ª–Ω—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. `{
   "login":"first__user",
   "email":"first__user__mail@mail.ru",
   "password":"12345",
   "confirmPassword":"12345"
   }`
8. –ù–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É cookies –≤ Postman. –í–∏–¥–∏–º cookie —Å –Ω–∞—à–∏–º –∏–º–µ–Ω–µ–º. Cookie —Å–æ–¥–µ—Ä–∂–∏—Ç id —Å–µ—Å—Å–∏–∏ (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω) –∏ –¥–∞—Ç—É –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Å—Å–∏–∏. `sessionId__Mongo__Express=s%3AgVO5EdHjpXsqAwtRd6rVP6aHd_RH8onO.5aeij2QYjknObGVNmgAAewdxZG4C5Jw%2FrwNGUqWyocY; Path=/; HttpOnly; Expires=Fri, 10 Jun 2022 17:55:25 GMT;`
9. –û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É redis. –í—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É keys *. –ü–æ–ª—É—á–∞–µ–º: `1) "sess:gVO5EdHjpXsqAwtRd6rVP6aHd_RH8onO"` –≠—Ç–æ —Ä–µ–∞–ª—å–Ω—ã–µ, –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ session id.
10. –í—ã–ø–æ–ª–Ω–∏–º –∫–æ–º–∞–Ω–¥—É get sess:gVO5EdHjpXsqAwtRd6rVP6aHd_RH8onO. –ü–æ–ª—É—á–∞–µ–º id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ–≥–æ login –∏ email.
11. Postman POST /api/auth/user-data. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
12. Postman POST /api/auth/logout. –í redis –æ–ø—è—Ç—å –Ω–µ—Ç –∫–ª—é—á–µ–π. –í postman cookie –æ—Å—Ç–∞–ª—Å—è (—Ç–∞–∫ –∫–∞–∫ –æ–Ω–æ (–ø–µ—á–µ–Ω—å–µ) —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –∞ –Ω–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
13. Postman POST /api/auth/user-data, –ø–æ–ª—É—á–∞–µ–º –æ—à–∏–±–∫—É: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.
14. Postman POST /api/auth/login. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í–∏–¥–∏–º —á—Ç–æ –¥–∞–Ω–Ω—ã–µ cookie –æ–±–Ω–æ–≤–∏–ª–∏—Å—å (–º—ã –ø–æ–ª—É—á–∏ –Ω–æ–≤—É—é –ø–µ—á–µ–Ω—å–∫—É, –≤–∑–∞–º–µ–Ω —Å—Ç–∞—Ä–æ–π)
15. Postman POST /api/auth/user-data. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
### Testing CORS
1. –ò–∑–º–µ–Ω—è–µ–º origin –≤ cors middleware –Ω–∞: https://learn.javascript.ru
2. –í Chrome –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã learn.javascript.ru. 
   –ö–æ–¥ –∑–∞–ø—Ä–æ—Å–∞:
```javascript
fetch('http://localhost:5000/api/auth/user-data', {
  method: 'POST',  
   credentials: 'include',
  headers: {
    'Accept': 'application/json',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({email: "first__user__mail@mail.ru", password: '12345'})
}).then(res => res.json())
  .then(res => console.log(res)).catch(err=>console.log(err));
```
–ü–æ–ª—É—á–∞–µ–º: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –í Chrome –æ—Ç–∫—Ä—ã–≤–∞–µ–º http://localhost:5000/ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ Application->Storage->Cookies –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ url –Ω–∞—à–µ–≥–æ —Å–∞–π—Ç–∞. –ù–∏—á–µ–≥–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –∑–Ω–∞—á–∏—Ç cookie –Ω–µ –Ω–∞–π–¥–µ–Ω. 
3. –ú–µ–Ω—è–µ–º url –Ω–∞ login. –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å. –í–∏–¥–∏–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í Chrome –æ—Ç–∫—Ä—ã–≤–∞–µ–º http://localhost:5000/ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ Application->Storage->Cookies –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ url –Ω–∞—à–µ–≥–æ —Å–∞–π—Ç–∞. –•–æ—Ç—è –æ—Ç–∫—Ä—ã–≤ –≤–∫–ª–∞–¥–∫—É networks –Ω–∞ —Å–∞–π—Ç–µ learn.js.ru, –≤–∏–¥–∏–º —á—Ç–æ –∫—É–∫–∏ –ø—Ä–∏—à–ª–∏ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞, –Ω–æ –±—Ä–∞—É–∑–µ—Ä –∏—Ö –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª.
4. –ü–æ–≤—Ç–æ—Ä–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å user-data. –ò —Å–Ω–æ–≤–∞ –ø–æ–ª—É—á–∞–µ–º: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.
5. –°–æ–∑–¥–∞–¥–∏–º get –º–∞—Ä—à—Ä—É—Ç /api. –û—Ç–∫—Ä–æ–µ–º –µ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ó–∞–º–µ–Ω–∏–º origin –Ω–∞ config.app.api_url. –∏ –≤—ã–ø–æ–ª–Ω–∏–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ç—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞.
   1. /user-data -> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
   2. /login -> –í–∏–¥–∏–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
   3. /user-data -> –í–∏–¥–∏–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
   4. –ü—Ä–æ–≤–µ—Ä—è–µ–º cookie, –æ–Ω–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
6. –ü–æ—á–µ–º—É –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑ cookie –Ω–µ –±—ã–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –±—Ä–∞—É–∑–µ—Ä–æ–º, –∞ –≤—Ç–æ—Ä–æ–º —Å–ª—É–∞–µ –±—ã–ª–∏?
7. –í—Å—ë –¥–µ–ª–æ –≤ –∞—Ç—Ä–∏–±—É—Ç–µ SameSite (https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite). –ü–æ—Å–ª–µ–¥–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤ —É—Å–∏–ª–∏–ª–∏ –∑–∞—â–∏—Ç—É –æ—Ç CSRF –∞—Ç–∞–∫, –∏ —Ç–µ–ø–µ—Ä—å –∑–∞–ø—Ä–æ—Å—ã —Å —Ä–∞–∑–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –∫—É–∫–∏ (—Å learn.js.ru –Ω–∞ localhost). –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —Å–∞–π—Ç–∞ –∫—É–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è (—Å localhost –Ω–∞ localhost). –ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://stackoverflow.com/a/61787597/10000274
### Testing Jest
1. –°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª __test__/api__auth__session.test.ts –∏ –≤ –Ω—ë–º –ø—Ä–æ–≤–µ–¥—ë–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å–µ—Å—Å–∏–π.
2. –¢–∞–∫ –∫–∞–∫ –º—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º memory-server –¥–ª—è redis (–Ω–µ –Ω–∞—à—ë–ª –ø–æ–ø—É–ª—è—Ä–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏). –¢–æ —Å—Ç–æ–∏—Ç –æ—á–∏—â–∞—Ç—å redis (flushall) –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## 7. –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ Redis
While(True){  
a. –í—ã–ø–æ–ª–Ω—è–µ–º login –≤ Chrome. –ü–æ–ª—É—á–∞–µ–º session –≤ redis.  
b. –£–¥–∞–ª—è–µ–º —Ñ–∞–π–ª cookie –∏–∑ Chrome.  
c. –í—ã–ø–æ–ª–Ω—è–µ–º login –≤ Chrome (–¥–ª—è —Ç–æ–≥–æ –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è). –ü–æ–ª—É—á–∞–µ–º 2 session –≤ redis –¥–ª—è 1 –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.     
}  
–ò—Ç–æ–≥–æ —É –Ω–∞—Å 100500 —Å–µ—Å—Å–∏–π –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ß—Ç–æ–±—ã —É—Å—Ç—Ä–∞–∏–Ω–∏—Ç—å —ç—Ç—É —É—è–∑–≤–∏–º–æ—Å—Ç—å –Ω–∞–ø–∏—à–µ–º sessionService.
–í config —É–∫–∞–∂–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –¥–∞–ª—å—à–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö.
–¢–µ–ø–µ—Ä—å –≤ redis —É –Ω–∞—Å –±—É–¥—É—Ç –¥–≤–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö:
1. –∫–ª—é—á: "sess:sessionId" –∑–Ω–∞—á–µ–Ω–∏–µ: "userID" (–∑–∞–ø–∏—Å—å –¥–ª—è –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–π, –∏—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ª–∏–º–∏—Ç –∑–∞–¥–∞—ë—Ç—Å—è –≤ config, —É –Ω–∞—Å 2 —Å–µ—Å—Å–∏–∏ –Ω–∞ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è))
2. –∫–ª—é—á: "userID" –∑–Ω–∞—á–µ–Ω–∏–µ: {user: userDto, sessions: ["sess:sessionId"]} (–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏ —Å–ø–∏—Å–æ–∫ –µ–≥–æ —Å–µ—Å—Å–∏–π)
3. –í sessionService 3 –º–µ—Ç–æ–¥–∞ (–¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Å—Å–∏—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —É–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é (logout), –∏ clear (–≤—ã–π—Ç–∏ —Å–æ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤, —É–¥–∞–ª–∏—Ç—å —Å–µ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è))
4. –ë—É–¥–µ–º –≤—ã–∑—ã–≤–∞—Ç—å sessionService –≤ userController
5. commit and push
## Testing
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é Postman –∏ redis-cli.
2. –°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª __test__/api__auth__session__overflow.test.ts –∏ –≤ –Ω—ë–º –ø—Ä–æ–≤–µ–¥—ë–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è redis –æ–¥–Ω–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
3. –ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –æ—Ç–¥–µ–ª—å–Ω–æ, —Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ–π–¥–µ–Ω—ã. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É npm run test, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è: –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ –ø—Ä–æ–π–¥–µ–Ω—ã 2 —Ç–µ—Å—Ç–∞, 4, –∏–ª–∏ –ø—Ä–æ–π–¥–µ–Ω—ã –≤—Å–µ. –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º —á—Ç–æ —Ç–µ—Å—Ç—ã (it, test) –≤ –±–ª–æ–∫–∞—Ö describe –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –æ–¥–Ω–∞–∫–æ —Å–∞–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≥–æ–Ω–∫–∞ –≤ –ë–î redis. 
4. –ß—Ç–æ–±—ã —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, –ø—Ä–æ–ø–∏—à–µ–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ jest, —Å–≤–æ–π—Å—Ç–≤–æ: maxWorkers: 1. –û–Ω–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è. –§–∞–π–ª—ã –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –ø–æ—Ä—è–¥–æ–∫ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–º.
5. –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–∏–º –æ–ø—Ü–∏—é --forceExit –≤ package.json. –ß—Ç–æ–±—ã —Å–µ—Ä–≤–µ—Ä express (–∑–∞—Ä—É—â–µ–Ω–Ω—ã–π supertest) –∑–∞–∫—Ä—ã–≤–∞–ª—Å—è, –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤. 

## 8. –ö–æ–º–∞–Ω—Ç—ã
1. –°–æ–∑–¥–∞–¥–∞–º–∏ —Å—Ö–µ–º—ã –ë–î –¥–ª—è –∫–æ–º–Ω–∞—Ç. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –±—É–¥—É—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã (–∞–Ω–∞–ª–æ–≥ –≥—Ä—É–ø–ø), –∏ —á–∞—Å—Ç–Ω—ã–µ –≥—Ä—É–ø–ø—ã (–∞–Ω–∞–ª–æ–≥ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —á–∞—Ç–æ–≤). –ü—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏ –¥–ª—è —Å–µ–±—è —Å–∞–º–æ–≥–æ. 
2. –í —Ñ–∞–π–ª–µ models->roomModels.ts. –û–±—ä—è–≤–∏–º –±–∞–∑–æ–≤—É—é –º–æ–¥–µ–ª—å (RoomSchema), –æ–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ users, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥—Ä—É–ø–ø—ã, –æ–Ω–æ —è–≤–ª—è–µ—Ç—Å—è –æ–±—â–∏–º –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∏ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç.
3. –° –ø–æ–º–æ—â—å—é –º–µ—Ö–∞–Ω–∏–∑–º–∞ –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ç–æ—Ä–æ–≤ MongoDB –≤—ã–ø–æ–ª–Ω–∏–º –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç –±–∞–∑–æ–≤–æ–π –º–æ–¥–µ–ª–∏ –∏ —Å–æ–∑–¥–∞–¥–∞–¥–∏–º –º–æ–¥–µ–ª—å –ø—É–±–ª–∏—á–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã (PublicRoomSchema) –∏ –º–æ–¥–µ–ª—å –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã (PrivateRoomSchema).
4. –î–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ç–æ—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ö–µ–º—ã –≤ –æ–¥–Ω–æ–π –∫–æ–ª–µ–∫—Ü–∏–∏, –∞ —Ç–∞–∫–∂–µ —Ä–∞–∑–¥–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∏—Ö —Å—Ö–µ–º—ã. (–û—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∏ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç).
5. –£ –ø—É–±–ª–∏—á–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã –µ—Å—Ç—å –≤–ª–∞–¥–µ–ª–µ—Ü (owner), –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤ –∫–æ–º–Ω–∞—Ç–µ (—É–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏–∑–º–µ–Ω—è–µ—Ç –ø–∞—Ä–æ–ª—å –∫–æ–º–Ω–∞—Ç—ã –∏ –µ—ë –Ω–∞–∑–≤–∞–Ω–∏–µ). –£ –ø—É–±–ª–∏—á–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã –µ—Å—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ. –ü—É–±–ª–∏—á–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø–∞—Ä–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –¥–ª—è –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è –≤ –Ω–µ—ë. 
6. –£ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã –µ—Å—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (leave_users) —É –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–∫—Ä—ã—Ç–∞ —ç—Ç–∞ –∫–æ–º–Ω–∞—Ç–∞. (–ü–û–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–π—Ç–∏ –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã, —Ç–æ–≥–¥–∞ –∫–æ–º–Ω–∞—Ç–∞ –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –∑–∞–∫—Ä—ã—Ç–æ–π). –ö–æ–≥–¥–∞ –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤—ã–π–¥—É—Ç –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã, –æ–Ω–∞ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞ –≤–º–µ—Å—Ç–µ —Å–æ –≤—Å–µ–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏. –ù–∞–∑–≤–∞–Ω–∏–µ–º –ø—Ä–∏–≤–∞—Ç–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã —è–≤–ª—è–µ—Ç—Å—è login –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏–ª–∏ —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π (–ø—Ä–∏–≤–∞—Ç–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ –¥–ª—è —Å–∞–º–æ–≥–æ —Å–µ–±—è).
7. –ü—É–±–ª–∏—á–Ω–∞—è –∏ —á–∞—Å—Ç–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã, –æ–±–ª–∞–¥–∞—é—Ç —Ä–∞–∑–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π. –ü–æ—ç—Ç–æ–º—É –¥–ª—è –Ω–∏—Ö —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã, DTO –∏ DAO.
8. –°–æ–∑–¥–∞–¥–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (privateRoomController.ts, publicRoomController.ts), —Å–µ—Ä–≤–∏—Å—ã, DTO –∏ DAO –¥–ª—è –∫–æ–º–Ω–∞—Ç.
9. –ü–∞—Ä–æ–ª—å –æ—Ç –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ. –î–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∏–º –±–∏–±–ª–∏–æ—Ç–∫–µ bcrypt (npm i bcrypt –∏ —Ç–∏–ø—ã –∫ –Ω–µ–π).
10. –¢–∞–∫–∂–µ –≤—ã–ø–æ–ª–Ω–∏–º —Ä–µ—Ñ—Ä–∞–∫—Ç–æ—Ä–∏–Ω–≥ router. –†–∞–∑–¥–µ–ª–∏–º –º–∞—Ä—à—Ä—É—Ç—ã –ø–æ –≥—Ä—É–ø–ø–∞–º –∏ –≤—ã–Ω–µ—Å–∏–º –∏—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (authRoutes.ts, privateRoomsRoutes.ts, publicRoomsRoutes.ts)
11. commit and push
## Testing
1. api__public__rooms__routes__create.ts 
2. api__private__rooms__routes__create.ts
3. api__public__rooms__routes__join.ts
4. api__public__and__private__rooms__routes__create.ts
5. api__private__rooms__routes__open.ts
6. npm run test

## 9. –°–æ–æ–±—â–µ–Ω–∏—è
1. –ú—ã –±—É–¥–µ–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –î–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–¥–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –º–æ–¥–µ–ª—å (models->messageModel.ts). –°–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∏ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –æ–¥–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
2. –ü–æ–ª–µ recipients —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π —Å–æ–æ–±—â–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—à—ë–ª –≤ –∫–æ–º–Ω–∞—Ç—É, –ø–æ—Ç–æ–º –≤—ã—à–µ–ª, –ø–æ—Ç–æ–º —Å–Ω–æ–≤–∞ –≤–µ—Ä–Ω—É–ª—Å—è. –í–æ –≤—Ä–µ–º—è –µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–∏—Å–∞–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è. –ù–æ –≤–µ—Ä–Ω—É–≤—à–∏–µ—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É–≤–∏–¥–∏—Ç –∏—Ö, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è.
3. –¢–∞–∫–∂–µ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å–æ–∑–¥–∞–¥–∏–º service, DAO, DTO.
4. –í —Ü–∏–∫–ª—è—Ö —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–¥–∏–º messageController, messageRoutes. –Ø –Ω–µ –ø–ª–∞–Ω–∏—Ä—É—é –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.
5. –¢–∞–∫ —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏ —É–∂–µ –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏–º –∏—Ö –ø–æ –ø–∞–ø–∫–∞–º.
6. commit and push
## Testing
1. –ü–∞–ø–∫–∞ message
2. npm run test

## 10.1 Lazy loading (messages)
1. –í –ø—Ä–µ–¥—ã–¥—É—â–µ–º –∫–æ–º–∏—Ç–µ –º—ã –ø–æ–ª—É—á–∞–ª–∏ –∫–æ–º–Ω–∞—Ç—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ–¥—ë—Ç —á–∞—Ç –¥–æ–ª–≥–æ, —Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∫–æ–º–Ω–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –º–Ω–æ–≥–æ. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥–æ–ª–≥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏ –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–∞–π—Ç. –û–¥–Ω–∞–∫–æ –æ–±—ã—á–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ—ç—Ç–æ–º—É –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π 100 —Å–æ–æ–±—â–µ–Ω–∏–π, –∞ –±–æ–ª–µ–µ —Ä–∞–Ω–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø–æ—Å—Ç—É–ø–∏—Ç—å –∏ —Å–∫–æ–º–Ω–∞—Ç–∞–º–∏, –∑–∞–≥—Ä–∂—É—Ç—å —Å–Ω–∞—á–∞–ª–æ –ø–µ—Ä–≤—ã–µ 20 –∫–æ–º–Ω–∞—Ç –ø–æ –¥–∞—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –Ω–∏—Ö. –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è lazy loading.
2. –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ –Ω–∞ —Å–∞–π—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–≤–∞ –∑–∞–ø—Ä–æ—Å–∞: /api/public-rooms-lazy, /api/private-rooms-lazy.
3. –≠—Ç–∏ –¥–≤–∞ –∑–∞–ø—Ä–æ—Å–∞ –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–ø 20 –∫–æ–º–Ω–∞—Ç (–ø–æ –¥–∞—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –Ω–∏—Ö), –≤ –º–µ—Å—Ç–µ —Å –∫—Ä–∞–π–Ω–µ–π —Å–æ—Ç–Ω–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö. 
4. –ü—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å–ø–∏—Å–∫–∞ –∫–æ–º–Ω–∞—Ç (–≤ UI), –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–æ–ø –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–∏—Ö 20 –∫–æ–º–Ω–∞—Ç.
5. –ò —Ç–∞–∫ –¥–∞–ª–µ–µ –ø–æ–∫–∞ –Ω–µ –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã –≤—Å–µ –∫–æ–º–Ω–∞—Ç—ã.
6. –ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∫–æ–º–Ω–∞—Ç—É —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å–æ–±—â–µ–Ω–∏–π, –Ω–æ –µ—Å–ª–∏ –æ–Ω –±—É–¥–µ—Ç –ª–∏—Å—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥—Ä—É–≥—Ä–∞–∂–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π (/api/messages-lazy)
7. –ü—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã–µ –≤—ã—à–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—É—á–∞—é—Ç –¥–∞–Ω–Ω—ã–µ, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Ç–∏–ø GET, –æ–¥–Ω–∞–∫–æ —á—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–Ω–∞—Ç—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–æ–∞–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–º–µ–Ω–Ω—ã–µ. –ü–æ—ç—Ç–æ–º—É –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç POST, —Ö–æ—Ç—è —ç—Ç–æ –Ω–µ –≤–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –º–æ–¥–µ–ª—å MVC (–≤–∏–¥–∏–º–æ MVC –Ω–µ –∏–¥–µ–∞–ª—å–Ω–∞ü§î)
8. –ú–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–π 20 –∫–æ–º–Ω–∞—Ç, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ 20 –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –±–¥ (skip(20).limit(20)). –û–¥–Ω–∞–∫–æ –¥–æ —Ç–æ–≥–æ –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Ç–æ—Ä—ã—Ö —Ç–æ–ø 20, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂—Ç–µ –≤—Å—Ç—É–ø–∏—Ç—å –≤ –¥—Ä—É–≥–∏–µ –∫–æ–º–Ω–∞—Ç—ã. –°–æ–æ—Ç–≤–µ—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ—Ä—è–¥–æ–∫ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç –∏–∑–º–µ–Ω–∏—Ç—Å—è. –ò –Ω—É–∂–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å —É–∂–µ –±–æ–ª—å—à–µ –∑–∞–ø–∏—Å–µ–π. –ü–æ—ç—Ç–æ–º—É –≤ –∑–∞–ø—Ä–æ—Å–µ –º—ã –±—É–¥–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –º–µ—Ç–∫—É –≤—Ä–µ–º–µ–Ω–∏ –∏ –º–∞—Å—Å–∏–≤ nin —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã. –°–Ω–∞—á–∞–ª–æ –º—ã –∑–∞–ø–∏—à–µ–º –≤ –º–µ—Ç–∫—É –≤—Ä–µ–º–µ–Ω–∏ –≤—Ä–µ–º—è —Å–∞–º–æ–≥–æ —Ä–∞–Ω–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–∫–æ—Ç–æ—Ä–æ–µ –º—ã —É–∂–µ –ø–æ–ª—É—á–∏–ª–∏), –≤ –º–∞—Å–∏–∏–≤ nin –∑–∞–ø–∏—à–µ–º id —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ—Ç–æ—Ä–µ –∏–º–µ—é—Ç —Ç–∞–∫—É—é –º–µ—Ç–∫—É –≤—Ä–µ–º–µ–Ω–∏ (–æ–±—ã—á–Ω–æ —ç—Ç–æ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ç–∞–∫ –∫–∞–∫ –º–µ—Ç–∫–∞ –æ—á–µ–Ω—å —Ç–æ—á–Ω–∞—è, –Ω–æ –≤ —Ç–µ–æ—Ä–∏–∏ –∏—Ö –º–æ–∂–µ—Ç –±—Ç—ã—å –±–æ–ª—å—à–µ).
9. –ú—ã –±—É–¥–µ–º –ø–æ–ª—É—á–∞—Ç—å –∑–∞–ø–∏—Å–∏ –≤ –±–¥ –∫–æ—Ç–æ—Ä—ã–µ –º–µ–Ω—å—à–µ –¥–∞–Ω–Ω–æ–π –º–µ—Ç–∫–∏ –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç ids.
10. –î–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∏–º–µ–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ nin –º–∞—Å—Å–∏–≤ –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º, —Ç–æ –µ—Å—Ç—å –Ω–µ–∞–ª—å–∑—è –≤—Å—Ç–∞–≤–ª—è—Ç—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–µ—Å—è—Ç–∫–∏ —Ç—ã—Å—è—á —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ–¥–Ω–æ —Ç–æ–∂–µ –≤—Ä–µ–º—è (–¥–æ —Ç—ã—Å—è—á–Ω–æ–π –¥–æ–ª–∏ —Å–µ–∫—É–Ω–¥—ã)
11. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ–º–Ω–∞—Ç –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –î–æ —ç—Ç–æ–≥–æ –º—ã –≤—ã–ø–æ–ª–Ω—è–ª–∏ –≤—Å—Ç–∞–≤–∫—É —Ç–æ–ª—å–∫–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
12. –î–ª—è –≤—Å—Ç–∞–≤–∫–∏ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è seeders (—Å–µ—è—Ç–µ–ª–∏). –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (–∏–ª–∏ –∫–ª–∞—Å—Å—ã), –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –∑–Ω–∞—á–µ–Ω–∏–π.
13. –î–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î –Ω–∞–º –Ω—É–∂–Ω—ã —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏–Ω—ã email –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ. –ß—Ç–æ–±—ã –∏—Ö —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π faker. (npm i @faker-js/faker)
14. –°–æ–∑–¥–∞–¥–∏–º –∫–ª–∞—Å—Å—ã —Å–∏–¥–µ—Ä–æ–≤ (–ø–∞–ø–∫–∞ seeders)
15. –ù–∞–ø–∏—à–µ–º —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–∏—Ö (test/seeders). 
16. –ï—Å–ª–∏ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–∏–¥–µ—Ä–æ–≤ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É ("Async callback was not invoked within the 5000 ms timeout specified by jest.setTimeout"). –¢–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–≤–µ–ª–∏—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã: jest.setTimeout(30000); –î–æ–±–∞–≤—å—Ç–µ –µ—ë —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ import –≤ —Ñ–∞–π–ª–µ –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞.
17. –°–æ–∑–¥–∞–¥–∏–º –º–∞—Ä—à—Ä—É—Ç /messages/lazy
18. –°–æ–∑–¥–∞–¥–∏–º –º–µ—Ç–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ MessageController.lazy
19. –°–æ–∑–¥–∞–¥–∏–º –º–µ—Ç–æ–¥ —Å–µ—Ä–≤–∏—Å–∞ MessageService.lazy
20. –°–æ–∑–¥–∞–¥–∏–º —Ñ—É–Ω–∫—Ü–∏—é DAO getUserMessagesByRoomIDLazy
21. –°–æ–∑–¥–∞–¥–∏–º DTO MessageDTOShort
22. commit and push
## Testing
1. –ü–∞–ø–∫–∞ lazy->messages
2. npm run test